---
description: 
globs: 
alwaysApply: false
---
---
description: This rule governs TypeScript development practices across the entire project. It should be considered whenever: (1) Planning new TypeScript features or components, (2) Modifying existing TypeScript code, (3) Reviewing or fixing TypeScript-related bugs, (4) Making architectural decisions that involve TypeScript, (5) Creating new TypeScript files or refactoring existing ones. The rule ensures consistent type safety, modern TypeScript patterns, and maintainable code structure. It's particularly crucial when dealing with data models, API interfaces, state management, and component architecture. Apply this rule when discussing, planning, or implementing any TypeScript-related changes to maintain code quality and prevent common pitfalls.
globs: 
alwaysApply: false
---
# TypeScript Best Practices

## ä½¿ç”¨åœºæ™¯

- è§„åˆ’æ–°çš„ TypeScript åŠŸèƒ½æˆ–ç»„ä»¶æ—¶
- ä¿®æ”¹ç°æœ‰ TypeScript ä»£ç æ—¶
- å®¡æŸ¥æˆ–ä¿®å¤ TypeScript ç›¸å…³ bug æ—¶
- åšå‡ºæ¶‰åŠ TypeScript çš„æ¶æ„å†³ç­–æ—¶
- åˆ›å»ºæ–°çš„ TypeScript æ–‡ä»¶æˆ–é‡æ„ç°æœ‰æ–‡ä»¶æ—¶

## å…³é”®è§„åˆ™

### ç±»å‹æ£€æŸ¥å’Œå®‰å…¨æ€§

- åœ¨ `tsconfig.json` ä¸­ä½¿ç”¨ä¸¥æ ¼ç±»å‹æ£€æŸ¥ï¼š`"strict": true`
- å¯¹å¯èƒ½è¢«æ‰©å±•çš„å¯¹è±¡å®šä¹‰ä¼˜å…ˆä½¿ç”¨ interface è€Œä¸æ˜¯ type
- å§‹ç»ˆä¸ºå‡½æ•°å’Œæ–¹æ³•å®šä¹‰æ˜¾å¼è¿”å›ç±»å‹
- å¯¹ç®€å•çš„æ ‡å¿—å€¼ä½¿ç”¨è”åˆç±»å‹è€Œä¸æ˜¯æšä¸¾
- å¯¹å¤æ‚çŠ¶æ€ç®¡ç†ä½¿ç”¨å¯åŒºåˆ†è”åˆç±»å‹
- ç¦æ­¢ä½¿ç”¨ `any` ç±»å‹ - å¯¹çœŸæ­£æœªçŸ¥çš„ç±»å‹ä½¿ç”¨ `unknown`
- å§‹ç»ˆæ˜¾å¼å¤„ç† null å’Œ undefined æƒ…å†µ
- å¯¹ä¸å¯å˜å±æ€§å’Œæ•°ç»„ä½¿ç”¨ readonly ä¿®é¥°ç¬¦
- ä½¿ç”¨è‡ªå®šä¹‰é”™è¯¯ç±»å‹å®ç°é”™è¯¯å¤„ç†
- ä½¿ç”¨ç±»å‹å®ˆå«è¿›è¡Œè¿è¡Œæ—¶ç±»å‹æ£€æŸ¥
- ä¿æŒæ³›å‹ç®€å•ä¸”çº¦æŸæ˜ç¡®
- é€‚å½“ä½¿ç”¨ Pickã€Omitã€Partial ç­‰å·¥å…·ç±»å‹
- ä½¿ç”¨ JSDoc æ³¨é‡Šè®°å½•å¤æ‚ç±»å‹å’Œæ‰€æœ‰å…¬å…±å‡½æ•°ã€ç±»å’Œæ¥å£

## ç¤ºä¾‹

### æ¨èå†™æ³•

```typescript
// ä½¿ç”¨å¸¦æœ‰æ˜¾å¼ç±»å‹çš„æ¥å£
interface UserState {
  readonly id: string;
  name: string;
  email: string | null;
  preferences: ReadonlyArray<string>;
}

// ä½¿ç”¨å¸¦æœ‰ç±»å‹å®ˆå«çš„å¯åŒºåˆ†è”åˆ
interface RequestPending {
  status: 'pending';
}

interface RequestSuccess {
  status: 'success';
  data: UserState;
}

interface RequestError {
  status: 'error';
  error: Error;
}

type RequestState = RequestPending | RequestSuccess | RequestError;

function isSuccess(state: RequestState): state is RequestSuccess {
  return state.status === 'success';
}

// å¸¦çº¦æŸçš„æ³›å‹
function getProperty<T, K extends keyof T>(obj: T, key: K): T[K] {
  return obj[key];
}
```

### ä¸æ¨èå†™æ³•

```typescript
// é”™è¯¯ - ä½¿ç”¨ any ç±»å‹
function processData(data: any) {
  return data.someProperty;
}

// é”™è¯¯ - æœªå¤„ç† null æƒ…å†µ
function getUserName(user: { name: string | null }): string {
  return user.name.toUpperCase(); // å¯èƒ½å´©æºƒ
}

// é”™è¯¯ - æœªç»æ£€æŸ¥å°±ä½¿ç”¨ç±»å‹æ–­è¨€
function processResponse(response: unknown) {
  const data = response as { id: number };
  return data.id;
}

// é”™è¯¯ - æ²¡æœ‰ç±»å‹å®‰å…¨çš„å¯å˜æ•°ç»„
const items = [];
items.push(123);
items.push('string'); // æ··åˆç±»å‹æ•°ç»„
```

> ğŸ’¡ **æç¤ºï¼š** å§‹ç»ˆä¼˜å…ˆè€ƒè™‘ç±»å‹å®‰å…¨å’Œä»£ç å¯ç»´æŠ¤æ€§ï¼Œé¿å…ä½¿ç”¨ any ç±»å‹å’Œä¸å®‰å…¨çš„ç±»å‹æ–­è¨€ã€‚ 